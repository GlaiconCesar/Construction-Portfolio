const dictionary = {
  en: {
    meta: {
      home: {
        title: 'Construction Portfolio | Home',
        description: 'Explore a construction portfolio featuring project case studies, core skills, and contact information.',
        ogTitle: 'Construction Portfolio | Home',
        ogDescription: 'Discover construction case studies, practical build expertise, and project highlights.'
      },
      salonPrive: {
        title: 'Salon Privé - Construction Breakdown | Living Luxe Design Show 2024',
        description:
          'Case study of Salon Privé at the Living Luxe Design Show 2024, covering framing, steel stud layout, curved feature execution, and finish coordination.',
        ogTitle: 'Salon Privé - Construction Breakdown',
        ogDescription:
          'Bilingual construction case study: modular trade show build, structural system, curved framing technique, and finishing coordination.'
      }
    },
    a11y: { skip: 'Skip to main content' },
    hero: {
      kicker: 'Construction Breakdown',
      eyebrow: 'Living Luxe Design Show 2024',
      title: 'Salon Privé - Construction Breakdown',
      summary:
        'This case study documents a modular and demountable trade show build executed under strict event deadlines. The work focused on framing precision, curved front geometry, and clean coordination with design and finishing trades.'
    },
    summary: {
      title: 'Project Summary',
      body:
        'Salon Privé united hospitality-grade aesthetics and practical event construction. The project required disciplined sequencing, dimensional accuracy, and premium finish readiness in a temporary venue setup.'
    },
    facts: {
      title: 'Project Facts',
      event: { label: 'Event', value: 'Living Luxe Design Show 2024' },
      design: { label: 'Design', value: 'Wise Nadel Design' },
      execution: { label: 'Execution', value: 'IMP Construction Group' },
      role: { label: 'Role', value: 'Framing & Interior Build Support' },
      location: { label: 'Location', value: 'Canada' },
      materials: { label: 'Materials', value: 'Light-gauge steel studs, plywood, 1/4" raw MDF' }
    },
    overview: {
      title: 'Project Overview',
      body:
        'Salon Privé was delivered as a premium hospitality-style environment inside a temporary event venue. The construction approach required fast assembly, dimensional control, and detailing that could support high-end finishes while remaining compatible with trade show logistics and teardown requirements.'
    },
    scope: {
      title: 'Scope of Work (My Contribution)',
      items: [
        'Supported layout and assembly of light-gauge steel framing for perimeter walls and upper structure.',
        'Assisted with base platform preparation using plywood for stability and finish support.',
        'Contributed to curved front feature framing, including segmented/cut track setup and stud spacing adjustments.',
        'Coordinated framing interfaces with finishing and millwork teams to keep handoff clean and on schedule.'
      ]
    },
    structure: {
      title: 'Structural System Breakdown',
      base: {
        title: 'Base Platform',
        body:
          'The platform used plywood as the primary substrate, selected for rigidity, fastening reliability, and tolerance control across high-traffic zones. It provided a stable base for wall lines, furniture integration, and final finish interfaces.'
      },
      wall: {
        title: 'Wall & Upper Framing',
        body:
          'Walls and overhead structure were framed with light-gauge steel studs, supporting both straight and curved conditions. This system balanced speed, repeatability, and clean geometry for architectural finishes.'
      }
    },
    curve: {
      title: 'Curved Front Feature - Technical Execution',
      steps: [
        'Segmented track (kerf-style cuts) was laid out to define the front radius accurately.',
        'Stud spacing was tightened along the curve to maintain shape control and reduce flat spotting.',
        'Local reinforcement was added where load transfer and edge stability were required.',
        'A 1/4" (6 mm) raw MDF skin was installed over the framed arc to create a smooth continuous surface ready for finish prep.'
      ]
    },
    mdf: {
      title: 'Material Selection - Why 1/4" Raw MDF?',
      items: [
        'Thin MDF bends more predictably over curved framing than thicker boards, improving contour continuity.',
        'Raw MDF supports precise shaping and clean joint transitions in premium interior applications.',
        'Best practice: raw MDF is absorbent and should be sealed/primed properly before final finishing to control porosity and protect surface quality.'
      ]
    },
    finish: {
      title: 'Surface Preparation & Finishing Coordination',
      body:
        'Before final finishes, surfaces were aligned, fastener points treated, and transitions reviewed with finishing and millwork teams. Coordination focused on maintaining design intent, reducing rework risk, and meeting quality expectations under event deadlines.'
    },
    constraints: {
      title: 'Construction Constraints',
      items: [
        'Compressed schedule with fixed show opening date and strict sequencing windows.',
        'Multi-trade coordination in a temporary venue with limited install space and active logistics.',
        'Need for demountable construction strategy while preserving premium visual quality.'
      ]
    },
    skills: {
      title: 'Skills Demonstrated',
      items: [
        'Light-gauge steel framing layout and execution',
        'Curved wall geometry and segmented track application',
        'Material behavior awareness (MDF + plywood in finish-sensitive assemblies)',
        'Site coordination with design, finishing, and millwork trades'
      ]
    },
    positioning: {
      title: 'Professional Positioning',
      body:
        'This project supports roles in interior framing, trade show construction, premium retail/hospitality fit-outs, and site coordination positions requiring disciplined execution under schedule pressure.'
    },
    gallery: {
      title: 'Image Gallery',
      download: 'Download PDF Case Study',
      openImage: 'Open image',
      viewerLabel: 'Image viewer',
      closeViewer: 'Close viewer',
      previousImage: 'Previous image',
      nextImage: 'Next image'
    },
    img_hero: 'Hero finished luxury booth interior',
    img_bar: 'Green stone bar feature detail',
    img_wine: 'Illuminated wine display wall',
    img_framing_arch: 'Metal framing during curved structure build',
    img_shell: 'Exterior shell nearing completion',
    img_framing_curve: 'Steel stud curved wall framing',
    img_brand: 'Wise Nadel Design Salon Privé branding',
    footer: { rights: 'Construction Portfolio' }
  },
  pt: {
    meta: {
      home: {
        title: 'Portfólio de Construção | Início',
        description: 'Explore um portfólio de construção com estudos de caso, competências essenciais e contato profissional.',
        ogTitle: 'Portfólio de Construção | Início',
        ogDescription: 'Conheça estudos de caso de obras, experiência prática e destaques de execução.'
      },
      salonPrive: {
        title: 'Salon Privé - Detalhamento Construtivo | Living Luxe Design Show 2024',
        description:
          'Estudo de caso do Salon Privé no Living Luxe Design Show 2024, abordando estrutura metálica, layout steel stud, execução de curva frontal e coordenação de acabamento.',
        ogTitle: 'Salon Privé - Detalhamento Construtivo',
        ogDescription:
          'Estudo de caso bilíngue: construção modular para feira, sistema estrutural, técnica de curvatura e coordenação de acabamento.'
      }
    },
    a11y: { skip: 'Pular para o conteúdo principal' },
    hero: {
      kicker: 'Detalhamento Construtivo',
      eyebrow: 'Living Luxe Design Show 2024',
      title: 'Salon Privé - Detalhamento Construtivo',
      summary:
        'Este estudo de caso documenta uma montagem modular e desmontável para feira, executada com prazo rígido. O foco foi precisão de estrutura, geometria curva frontal e coordenação limpa com design e acabamento.'
    },
    summary: {
      title: 'Resumo do Projeto',
      body:
        'O Salon Privé combinou estética de alto padrão com execução eficiente para evento. A estratégia construtiva equilibrou velocidade, precisão dimensional e preparação para acabamento premium em ambiente temporário.'
    },
    facts: {
      title: 'Ficha do Projeto',
      event: { label: 'Evento', value: 'Living Luxe Design Show 2024' },
      design: { label: 'Design', value: 'Wise Nadel Design' },
      execution: { label: 'Execução', value: 'IMP Construction Group' },
      role: { label: 'Função', value: 'Suporte em estrutura e construção interna' },
      location: { label: 'Local', value: 'Canadá' },
      materials: { label: 'Materiais', value: 'Steel stud leve, compensado, MDF cru 1/4"' }
    },
    overview: {
      title: 'Visão Geral do Projeto',
      body:
        'O Salon Privé foi entregue como um ambiente premium de hospitalidade em um espaço de evento temporário. A abordagem exigiu montagem rápida, controle dimensional e detalhamento capaz de receber acabamentos de alto padrão sem comprometer logística de feira e desmontagem.'
    },
    scope: {
      title: 'Escopo de Trabalho (Minha Contribuição)',
      items: [
        'Apoio no traçado e montagem de estrutura metálica leve para paredes perimetrais e parte superior.',
        'Apoio na preparação da base em compensado para estabilidade e suporte de acabamento.',
        'Contribuição na estrutura da frente curva com trilhos segmentados/cortados e ajuste de espaçamento dos montantes.',
        'Coordenação de interfaces de estrutura com equipes de acabamento e marcenaria para entrega limpa e no prazo.'
      ]
    },
    structure: {
      title: 'Detalhamento do Sistema Estrutural',
      base: {
        title: 'Base de Plataforma',
        body:
          'A plataforma utilizou compensado como substrato principal, escolhido por rigidez, confiabilidade de fixação e controle de tolerância em áreas de alto tráfego. Serviu como base estável para paredes, integração de mobiliário e interfaces de acabamento final.'
      },
      wall: {
        title: 'Paredes e Estrutura Superior',
        body:
          'As paredes e a estrutura superior foram executadas em steel stud leve, atendendo geometrias retas e curvas. O sistema equilibrou velocidade, repetibilidade e leitura limpa para acabamentos arquitetônicos.'
      }
    },
    curve: {
      title: 'Frente Curva - Execução Técnica',
      steps: [
        'Foi feito o traçado com trilho segmentado (cortes tipo kerf) para definir com precisão o raio frontal.',
        'O espaçamento dos montantes foi reduzido na curva para manter forma contínua e evitar facetas.',
        'Foram aplicados reforços pontuais onde havia necessidade de transferência de carga e estabilidade de borda.',
        'Uma pele de MDF cru de 1/4" (6 mm) foi instalada sobre o arco estruturado para criar superfície contínua pronta para preparo de acabamento.'
      ]
    },
    mdf: {
      title: 'Seleção de Material - Por que MDF cru de 1/4"?',
      items: [
        'MDF fino conforma melhor sobre estruturas curvas do que chapas mais espessas, preservando o raio.',
        'O MDF cru permite modelagem precisa e transições limpas de junta em interiores premium.',
        'Boa prática: MDF cru é absorvente e deve receber seladora/primer antes do acabamento final para controlar porosidade e qualidade superficial.'
      ]
    },
    finish: {
      title: 'Preparação de Superfície e Coordenação de Acabamento',
      body:
        'Antes do acabamento final, as superfícies foram alinhadas, pontos de fixação tratados e transições revisadas com as equipes de acabamento e marcenaria. A coordenação buscou preservar a intenção de projeto, reduzir retrabalho e manter o padrão de qualidade no prazo do evento.'
    },
    constraints: {
      title: 'Restrições de Construção',
      items: [
        'Cronograma comprimido, com data fixa de abertura do evento e janelas rígidas de sequência.',
        'Coordenação de múltiplas equipes em espaço temporário com área limitada e logística ativa.',
        'Necessidade de estratégia desmontável sem comprometer a leitura visual premium do ambiente.'
      ]
    },
    skills: {
      title: 'Competências Demonstradas',
      items: [
        'Traçado e execução de estrutura metálica leve',
        'Geometria de parede curva e aplicação de trilho segmentado',
        'Conhecimento de comportamento de materiais (MDF + compensado em sistemas sensíveis ao acabamento)',
        'Coordenação de obra com design, acabamento e marcenaria'
      ]
    },
    positioning: {
      title: 'Posicionamento Profissional',
      body:
        'Este projeto fortalece atuação em estruturação interna, construção para feiras, fit-out premium de varejo/hospitalidade e funções de coordenação de obra que exigem execução disciplinada sob pressão de prazo.'
    },
    gallery: {
      title: 'Galeria de Imagens',
      download: 'Baixar PDF do Estudo de Caso',
      openImage: 'Abrir imagem',
      viewerLabel: 'Visualizador de imagens',
      closeViewer: 'Fechar visualizador',
      previousImage: 'Imagem anterior',
      nextImage: 'Próxima imagem'
    },
    img_hero: 'Interior finalizado do booth de luxo',
    img_bar: 'Detalhe do bar em pedra verde',
    img_wine: 'Parede iluminada com exposição de vinhos',
    img_framing_arch: 'Estrutura metálica durante execução curva',
    img_shell: 'Casca externa quase finalizada',
    img_framing_curve: 'Estrutura steel stud da parede curva',
    img_brand: 'Identidade Wise Nadel Design Salon Privé branding',
    footer: { rights: 'Portfólio de Construção' }
  }
};

function getValue(path, source) {
  return path.split('.').reduce((acc, part) => {
    if (acc === undefined || acc === null) return undefined;
    if (/^\d+$/.test(part)) return acc[Number(part)];
    return acc[part];
  }, source);
}

function getFallbackText(element) {
  return element.getAttribute('data-fallback') || element.textContent.trim() || '[content unavailable]';
}

function getCurrentPageMetaKey() {
  const path = window.location.pathname;
  if (path.endsWith('/projects/salon-prive.html') || path.endsWith('projects/salon-prive.html')) return 'salonPrive';
  return 'home';
}

function getDocumentLang(lang) {
  return lang === 'pt' ? 'pt-BR' : 'en';
}

function updateMetadata(langPack, fallbackPack, lang) {
  document.documentElement.lang = getDocumentLang(lang);

  const pageMetaKey = getCurrentPageMetaKey();
  const pageMeta = langPack.meta[pageMetaKey] || fallbackPack.meta[pageMetaKey];

  if (!pageMeta) return;

  document.title = pageMeta.title;

  const description = document.querySelector('meta[name="description"]');
  const ogTitle = document.querySelector('meta[property="og:title"]');
  const ogDescription = document.querySelector('meta[property="og:description"]');

  if (description) description.setAttribute('content', pageMeta.description);
  if (ogTitle) ogTitle.setAttribute('content', pageMeta.ogTitle);
  if (ogDescription) ogDescription.setAttribute('content', pageMeta.ogDescription);
}

function applyLanguage(lang) {
  const langPack = dictionary[lang] || dictionary.en;
  const fallbackPack = dictionary.en;
  localStorage.setItem('preferredLanguage', lang);

  document.querySelectorAll('[data-i18n]').forEach((element) => {
    const key = element.getAttribute('data-i18n');
    const value = getValue(key, langPack);
    const fallbackValue = getValue(key, fallbackPack);
    element.textContent = typeof value === 'string' ? value : typeof fallbackValue === 'string' ? fallbackValue : getFallbackText(element);
  });

  document.querySelectorAll('[data-i18n-alt]').forEach((element) => {
    const key = element.getAttribute('data-i18n-alt');
    const value = getValue(key, langPack);
    const fallbackValue = getValue(key, fallbackPack);
    const fallbackAttr = element.getAttribute('alt') || 'Portfolio image';
    element.setAttribute('alt', typeof value === 'string' ? value : typeof fallbackValue === 'string' ? fallbackValue : fallbackAttr);
  });

  document.querySelectorAll('[data-lang-btn]').forEach((button) => {
    const active = button.getAttribute('data-lang-btn') === lang;
    button.setAttribute('aria-pressed', String(active));
  });

  updateMetadata(langPack, fallbackPack, lang);

  window.__langPack = langPack;
  window.__translate = (key, defaultText = '') => {
    const localized = getValue(key, window.__langPack || fallbackPack);
    if (typeof localized === 'string') return localized;
    const enValue = getValue(key, fallbackPack);
    return typeof enValue === 'string' ? enValue : defaultText;
  };

  window.dispatchEvent(new CustomEvent('languagechange', { detail: { lang, langPack } }));
}

function getInitialLanguage() {
  const params = new URLSearchParams(window.location.search);
  const queryLang = params.get('lang');

  if (queryLang === 'en' || queryLang === 'pt') return queryLang;

  const saved = localStorage.getItem('preferredLanguage');
  if (saved === 'en' || saved === 'pt') return saved;

  return 'en';
}

window.addEventListener('DOMContentLoaded', () => {
  const initial = getInitialLanguage();
  applyLanguage(initial);

  document.querySelectorAll('[data-lang-btn]').forEach((button) => {
    button.addEventListener('click', () => {
      const selected = button.getAttribute('data-lang-btn');
      applyLanguage(selected);

      const url = new URL(window.location.href);
      url.searchParams.set('lang', selected);
      window.history.replaceState({}, '', url);
    });
  });

  const yearNode = document.getElementById('year');
  if (yearNode) yearNode.textContent = String(new Date().getFullYear());
});
